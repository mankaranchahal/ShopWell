<!DOCTYPE html>
<html ng-app="app">

<head>
    <title>
        <%= title %>
    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700' rel='stylesheet' type='text/css'>
    <link href="/stylesheets/style.css" rel="stylesheet" type="text/css" media="all" />
    <link href="/stylesheets/bootstrap.min.css" rel="stylesheet">
    <link href="/stylesheets/scrolling-nav.css" rel="stylesheet">
    <link href="/stylesheets/slider.css" rel="stylesheet" type="text/css" media="all" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/productviewgallery.css" media="all" />
    <link href="/stylesheets/owl.carousel.css" rel="stylesheet">

    <link href=" https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css" rel="stylesheet">
    
    
    
   
    
    
    
    <!-- Custom CSS -->
<!--    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>-->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.25/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.25/angular-route.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.25/angular-resource.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-local-storage/0.5.0/angular-local-storage.min.js"></script>  
    
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/cloud-zoom.1.0.3.min.js"></script>
    <script type="text/javascript" src="js/jquery.fancybox.pack.js"></script>
    <script type="text/javascript" src="js/jquery.fancybox-buttons.js"></script>
    <script type="text/javascript" src="js/jquery.fancybox-thumbs.js"></script>
    <script type="text/javascript" src="js/productviewgallery.js"></script>
    
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-sweetalert/1.0.1/sweetalert.min.js"></script>
   
    
    
    <!-- start top_js_button -->
    <!--<script type="text/javascript" src="js/jquery.min.js"></script>-->
    <script type="text/javascript" src="js/move-top.js"></script>
    <script type="text/javascript" src="js/easing.js"></script>
    <script type="text/javascript">
        jQuery(document).ready(function ($) {
            $(".scroll").click(function (event) {
                event.preventDefault();
                $('html,body').animate({
                    scrollTop: $(this.hash).offset().top
                }, 1200);
            });
        });
    </script>
    <!--<script type="text/javascript" src="js/jquery.min.js"></script>-->
    <!-- start slider -->
    <script type="text/javascript" src="js/modernizr.custom.28468.js"></script>
    <script type="text/javascript" src="js/jquery.cslider.js"></script>
    <!--       <script src="js/responsive.menu.js"></script>-->
    <script type="text/javascript">
        $(function () {
            $('#da-slider').cslider();
        });
    </script>
    <!-- Owl Carousel Assets -->
    <!-- Owl Carousel Assets -->
    <!-- Prettify -->
    <script src="js/owl.carousel.js"></script>
    <script>
        $(document).ready(function () {
            $("#owl-demo").owlCarousel({
                items: 4
                , lazyLoad: true
                , autoPlay: true
                , navigation: true
                , navigationText: ["", ""]
                , rewindNav: false
                , scrollPerPage: false
                , pagination: false
                , paginationNumbers: false
            , });
        });
    </script>
</head>
    <body>
<ng-view></ng-view>
<!-- Libraries -->
<!-- Script -->
<!--<script src="js/responsive.menu.js"></script>-->
<script type="text/javascript">
    $(document).ready(function () {
        var defaults = {
            containerID: 'toTop', // fading element id
            containerHoverID: 'toTopHover', // fading element hover id
            scrollSpeed: 1200
            , easingType: 'linear'
        };
        $().UItoTop({
            easingType: 'easeOutQuart'
        });
    });
</script>
<!-- Template -->
<script type="text/ng-template" id="/products.html">
    <div id="page-top" data-spy="scroll" data-target=".navbar-fixed-top">
        <div class="header_bg">
            <div class="wrap">
                <div class="header">
                    <div class="logo">
                        <a href="/"><img src="images/logo5.png" alt="" /> </a>
                    </div>
                    <div class="h_icon" ng-controller="CartDetailCtrl">
<ul class="icon1 sub-icon1">
                            <li><a href="#/CartDetail"><img src="images/cart.png" alt="" /> </a>
                         <!--   <sup style=" line-height: 21px;
    text-align: center;
    border-radius: 100px;
    top: 10px;
    /* vertical-align: super; */
    width: 23px;
    position: absolute;
    visibility: visible;
    right: 10px;
    font-size: 2em;
    color: slateblue;">{{productList.length}}</sup> -->
                            <i></i></a>
                                <ul class="sub-icon1 list">
                                    <li>
                                        <h3>
                                        <div ng-if=" productList.length== 0 ">Shopping Cart is empty</div>
                                          <div ng-cloak ng-if=" productList.length!=0 ">{{productList.length}} item/s added to cart</div></h3>
                                        </h3>
                                    </li>
                                    
                                </ul>
                            </li>
                        </ul> 

                    </div>
                    <div class="h_search">
    		<form>
            
                        <input type="text" ng-model="searchValue" placeholder="Search by title / category" >
                        
</form>
		</div>
                    <div class="clear"></div>
                </div>
            </div>
        </div>
        <div class="header_btm">
            <div class="wrap">
                <div class="header_sub">
                    <div class="h_menu">
                        <ul>
                            <li class="active"><a href="/">Home</a></li> |
                            <li><a href="#/product/electronics">Electronics</a></li> |
                            <li><a href="#/product/clothing">Clothing</a></li> |
                            <li><a href="#/product/books">Books</a></li> |
                            <li><a href="#/contactUs">Contact us</a></li>
                        </ul>
                    </div>
                    <div class="top-nav">
                        <div class="search_box">
                            <form>
                                <input type="text" value="Search" onfocus="this.value = '';" onblur="if (this.value == '') {this.value = 'Search';}">
                                 </form>
                        </div>
                        <div class="clear"> </div>
                    </div>
                    <div class="clear"></div>
                </div>
                <!-- start slider -->
                <section>
                    <div id="da-slider" class="da-slider" style="background-position: 200% 0%;">
                        <div class="da-slide da-slide-fromright">
                            <h2>Welcome to ShopWell</h2>
                            <p>Free Fast Delivery | Best Product<br> 15 Day Return | Easy Returns  </p>
                          
                            <div class="da-link page-scroll" href="">shop now</div>
                            <div class="da-img" style:"><img src="images/slider1.png" alt="image01" height="220px" width="190px"></div>
                        </div>
                    </div>
                </section>
                <section id="featured" class="featuredValue">
                    <div class="main_bg1">
                        <div class="wrap">
                            <div class="main1">
                                <h2>Featured Products</h2> </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
        <!-- start main -->
        <div class="main_bg">
            <div class="wrap">
                <div class="main">
                    <!-- start grids_of_3 -->
                    <div class="grids_of_3">
                        <div class="grid0_of_3">
                            <div ng-repeat="product in products | filter:'electronics'| filter:searchValue| limitTo : 3">
                                <div class="grid1_of_3">
					<img src="{{product.img}}" style= "width:200px; height:180px; alt="" />
					<h3>{{product.title}}</h3>
					<div class="price">
						<h4>₹{{product.price}}<span><a href="#/detail/{{product._id}}">Indulge</a></span></h4>
					</div>
					<span class="b_btm"></span>
				 </div>
                            </div>
                            <div class="grid0_of_3">
                                <div ng-repeat="product in products | filter:'clothing'|filter:searchValue| limitTo : 3">
                                   <div class="grid1_of_3">
					<img src="{{product.img}}" style= "width:200px; height:180px; alt="" />
					<h3>{{product.title}}</h3>
					<div class="price">
						<h4>₹{{product.price}}<span><a href="#/detail/{{product._id}}">Indulge</a></span></h4>
					</div>
					<span class="b_btm"></span>
					</div>
					
                                </div>
                                <div class="grid0_of_3">
                                    <div ng-repeat="product in products | filter:'books'|filter:searchValue| limitTo : 3">
                                        <div class="grid1_of_3">
					<img src="{{product.img}}" style= "width:200px; height:180px; alt="" />
					<h3>{{product.title}}</h3>
					<div class="price">
						<h4>₹{{product.price}}<span><a href="#/detail/{{product._id}}">Indulge</a></span></h4>
					</div>
					<span class="b_btm"></span>
				 </div>
                                    </div>
                                    <div class="clear"></div>
                                </div>
                            </div>
                            <!-- end grids_of_3 -->
                        </div>
                    </div>

               <!-- start footer -->
                <div class="footer_bg">
                    <div class="wrap">
                        <div class="footer">
                            <!-- start grids_of_4 -->
                            <div class="grids_of_4">
                                <div class="grid1_of_4">
                                    <h4>Get to know us</h4>
                                    <ul class="f_nav">
                                        <li><a href="">About Us</a></li>
                                        <li><a href="">Careers</a></li>
                                        <li><a href="">Press Releases</a></li>
                                        <li><a href="">Gift A Smile</a></li>                   </ul>
                                </div>
                                <div class="grid1_of_4">
                                    <h4>Connect With Us</h4>
                                    <ul class="f_nav">
                                        <li><a href="">Facebook</a></li>
                                        <li><a href="">Twitter</a></li>
                                        <li><a href="">Instagram</a></li>
                                       
                                    </ul>
                                </div>
                                <div class="grid1_of_4">
                                    <h4>Make Money With Us</h4>
                                    <ul class="f_nav">
                                        <li><a href="">Refer & Earn Rs.200</a></li>
                                        <li><a href="">Sell On Shopwell</a></li>
                                        <li><a href="">Advertise Your Products</a></li>
                                        <li><a href="">Pay With ShopWell</a></li>                                      </ul>
                                </div>
                                <div class="grid1_of_4">
                                    <h4>Let Us Help You</h4>
                                    <ul class="f_nav">
                                        <li><a href="">Your Account</a></li>
                                        <li><a href="">Returns Center</a></li>
                                        <li><a href="">100% Purchase</a></li>
                                        <li><a href="">Help</a></li>
                                        
                                    </ul>
                                </div>
                                <div class="clear"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- start footer -->
                <div class="footer_bg1">
                    <div class="wrap">
                        <div class="footer">
                            <!-- scroll_top_btn --><a href="#" id="toTop" style="display: block;"><span id="toTopHover" style="opacity: 1;"></span></a>
                            <!--end scroll_top_btn -->
                            <div class="copy">
                                <p class="link">&copy; All rights reserved &nbsp;&nbsp;</p>
                            </div>
                            <div class="clear"></div>
                        </div>
                    </div>
                </div>

</script>
<script>
    angular.module('app', ['ngRoute', 'ngResource','LocalStorageModule'])
        //---------------
        // Services
        //---------------
        .factory('Products', ['$resource', function ($resource) {
            return $resource('/products/:id', null, {
                'update': {
                    method: 'PUT'
                }
            });
        }])
    
    
   .controller('CatalogueController', ['$scope', 'Products', '$routeParams','localStorageService',function ($scope, Products, $routeParams,localStorageService) {
                
                $scope.products = []; 
                $scope.products_insert= function(){
                    alert(JSON.stringify($scope.products));
                    Products.save($scope.products,function(val, key){
                        
                        //do something here
                    });   
                };
        }]) 
        
    
    
    
    
    .controller('CartDetailCtrl', ['$scope', 'Products','localStorageService', function($scope, Products,localStorageService) {
           
         $scope.test = function(cardNumber,cvvNumber) {
             $scope.card = parseInt(cardNumber.$modelValue);
             $scope.cvv = parseInt(cvvNumber.$modelValue);
             
             $scope.regex = "^[0-9]";
             
           
             var cardValue=/^[0-9]+$/.test($scope.cardNumber);
                var cvvValue=/^[0-9]+$/.test($scope.cvvNumber);
             
             $scope.lengthCardNumber=$scope.cardNumber.length;
             $scope.lengthCvv= $scope.cvvNumber.length;
             
           
             debugger;
             if(angular.isString($scope.card) || angular.isString( $scope.cvv) || Number.isNaN(Number($scope.card )) || Number.isNaN(Number($scope.cvv )) || $scope.lengthCardNumber!=16 || $scope.lengthCvv !=3 || cvvValue == false || cardValue == false){
                 debugger;
             }else{
                 debugger;
             swal({
                 title: "Your Order Has Been Placed!",
                 confirmButtonText: "OK",
               function(){
    window.location.href = 'home.html';
}                
             })
                
             }
             
  }
        
       
        
        $scope.productList = localStorageService.get('productList');
            console.log($scope.productList);
          $scope.total=0;
          angular.forEach($scope.productList, function(val, key) {
           console.log("original price : " + val.price);          
        $scope.tempPrice = val.price;
        $scope.total += $scope.tempPrice;
              console.log("temp var : " + $scope.total);
                });
       
        
          console.log($scope.total);
            //to remove product from cart
            $scope.remove = function(product) {
                debugger;
                console.log(product);
                angular.forEach($scope.productList, function(val, key) {
                    if (angular.equals(product._id, val._id)) {
                        var index = $scope.productList.indexOf(val)
                        $scope.productList.splice(index, 1);
                        localStorageService.set('productList', $scope.productList);
                        $scope.total=$scope.total-val.price;
                        debugger;
                    };
                });
            };
          
      }])
    
    
        //---------------
        // Controllers
        //---------------
        .controller('ProductController',['$scope', 'Products','$routeParams', 'localStorageService', function ($scope, Products,$routeParams, localStorageService) {
          $scope.editing = [];
            
          $scope.products = Products.query();
            $scope.addToCart = function(myProduct) {
                      $scope.isDisabled = false;
                var product = myProduct;
                var productList = localStorageService.get('productList') || [];
                $scope.exists = false;
                angular.forEach(productList, function(val, key) {
                    if (angular.equals(product._id, val._id)) {                        
                        $scope.exists = true
                    };
                });
                if ($scope.exists == false && product.id != "") {
                  
                    productList.push(product);
                    
                    localStorageService.set('productList', productList);
                    console.log("value");
                    console.log($scope.isDisabled );
                }
                    
                    
                    
     if($scope.exists  == true)
       { 
           alert("This item is in your cart already! You can only add 1 same item once");
       }
       if($scope.exists  == false)
       {    alert("This item has been added succesfully!");          
       }


            };
            
        }])
    
    
    /* 
            localStorage.setItem("test", $scope.products);
            console.log(localStorage.getItem("test"));*/
    
    
        /*.controller('ElectronicsController','Products' ['$scope', 'Products', function ($scope, Products) {
           $scope.editing = [];
           $scope.products = Products.query();
         }])*/
        .controller('ProductDetailCtrl', ['$scope', 'Products', '$routeParams', function ($scope, Products, $routeParams) {
            debugger;
            $scope.products = Products.query();
            $scope.category = $routeParams.category;
            $scope.filterTags = function (tag) {
                //console.log(tag, $scope.catSort);
                return tag.category == $scope.category;
            };
            
            
              $scope.propertyName = 'price';
    $scope.reverse = true;
    debugger;

    $scope.sortBy = function(propertyName) {
        debugger;
      $scope.reverse = ($scope.propertyName === propertyName) ? !$scope.reverse : false;
      $scope.propertyName = propertyName;
    }; 
            console.log($scope.category);
        }])
    
   
      .controller('ItemDetailCtrl', ['$scope','$rootScope','Products', '$routeParams','localStorageService','$location','$window', function ($scope,$rootScope, Products, $routeParams,localStorageService, $location,$window) {
            debugger;
            $scope.products = Products.query();
            $scope._id = $routeParams.id;
            $scope.filterId = function (tag) {
                //console.log(tag, $scope.catSort);
                return tag._id == $scope._id;
            };
            
            $rootScope.Quant;
            
            $scope.addToCartQuantity = function(myProduct,quantity) {
                debugger;
                      $scope.isDisabled = false;
                var product = myProduct;
                var productList = localStorageService.get('productList') || [];
                
                 var quantity=localStorageService.get('quantity');
                var Size=localStorageService.get('size');
                $scope.exists = false;
                $rootScope.Quant = quantity;
                console.log("kkkk",$rootScope.Quant)
                if(quantity=="" || quantity==undefined ){
                    alert("Quantity not selected")
                }else{
                    
                     angular.forEach(productList, function(val, key) {
                    if (angular.equals(product._id, val._id)) {                        
                        $scope.exists = true;
                    };
                     });
                if ($scope.exists == false && product.id != "") {                  
                    productList.push(product);                    
                    localStorageService.set('productList', productList);
                     localStorageService.set('quantity', quantity);
                    console.log($scope.isDisabled );
                }  
        if($scope.exists  == true)
       { 
           $window.location.reload();
           alert("This item is in your cart already! You can only add 1 same item once");
       }
       if($scope.exists == false)
       {  $window.location.reload();
           alert("This item has been added succesfully!");  
           
       }
                }
               

            };
            
            
            $scope.addToCart = function(myProduct) {
                debugger;
                      $scope.isDisabled = false;
                var product = myProduct;
                var productList = localStorageService.get('productList') || [];
               /* 
                 var quantity=localStorageService.get('quantity');
                var Size=localStorageService.get('size');*/
                $scope.exists = false;
               /* $rootScope.Quant = quantity;
                console.log("kkkk",$rootScope.Quant)*/
                
                     angular.forEach(productList, function(val, key) {
                    if (angular.equals(product._id, val._id)) {                        
                        $scope.exists = true;
                    };
                     });
                        if($scope.exists  == true)
       { 
           alert("This item is in your cart already! You can only add 1 same item once");
       }
       if($scope.exists  == false)
       {    alert("This item has been added succesfully!");          
       }
                
                if ($scope.exists == false && product.id != "") {                  
                    productList.push(product);                    
                    localStorageService.set('productList', productList);
                
                     }  
                 /*   console.log("value");
                    console.log($scope.isDisabled );*/
               
    
               

            };
        }])


        //---------------
        // Routes
        //---------------
        .config(['$routeProvider', function ($routeProvider) {
            $routeProvider.when('/', {
                templateUrl: '/products.html'
                , controller: 'ProductController'
            }).when('/product/:category', {
                templateUrl: '/indexProduct.html'
                , controller: 'ProductDetailCtrl'
            }).when('/detail/:id', {
                templateUrl: '/indexDetail.html'
                , controller: 'ItemDetailCtrl'
           })/*.when('/prod/clothing', {
                templateUrl: '/indexcloth.html'
                , controller: 'ProductController'
            })*/
            .when('/contactUs', {
                templateUrl: '/indexContact.html'
            })
             .when('/CartDetail', {
              templateUrl: '/indexaddToCart.html',
               controller: 'CartDetailCtrl'
            })
            .when('/billing', {
              templateUrl: '/indexBilling.html',
               controller: 'CartDetailCtrl'
            })
             .when('/invoice', {
              templateUrl: '/indexInvoice.html',
               controller: 'CartDetailCtrl'
            }) .when('/catalogue', {
              templateUrl: '/catalogue.html',
               controller: 'CatalogueController'
            })
           
             }]);
</script>
</body>

</html>
